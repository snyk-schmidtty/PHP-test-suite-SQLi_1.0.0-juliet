FROM php:7.3-apache
RUN apt-get update
ENV ACCEPT_EULA=Y
RUN apt-get update
RUN apt-get install -y gnupg gnupg2 gnupg1
# Microsoft SQL Server Prerequisites
RUN apt-get update && curl https://packages.microsoft.com/keys/microsoft.asc | apt-key add - \
  && curl https://packages.microsoft.com/config/debian/9/prod.list > /etc/apt/sources.list.d/mssql-release.list  \ 
  && apt-get install -y --no-install-recommends locales apt-transport-https && echo "en_US.UTF-8 UTF-8" > /etc/locale.gen \ 
  && locale-gen && apt-get update \ 
  && apt-get -y --no-install-recommends install unixodbc-dev msodbcsql17
RUN pecl install sqlsrv pdo_sqlsrv
RUN docker-php-ext-enable sqlsrv pdo_sqlsrv
RUN docker-php-ext-install pdo mbstring
RUN a2enmod rewrite
COPY src/ /var/www/html/
EXPOSE 80